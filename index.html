<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <title>Metabolizma HesaplayÄ±cÄ± PKU</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/user-input.css">
    <link rel="stylesheet" href="css/reference.css">
    <link rel="stylesheet" href="css/calculations.css">
    <link rel="stylesheet" href="css/food-selection.css">
    <link rel="stylesheet" href="css/meal-planning.css?v=7">
    <link rel="stylesheet" href="css/history.css">
    <link rel="stylesheet" href="css/tooltip.css">
    <link rel="stylesheet" href="css/mobile.css">
    <link rel="stylesheet" href="css/modal.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Metabolizma HesaplayÄ±cÄ± PKU</h1>
            <p>Beslenme ve Metabolizma DeÄŸerlendirme Sistemi</p>
        </header>

        <!-- Section 1: Personal Information -->
        <section id="personal-info" class="section">
            <h2>1. KiÅŸisel Bilgiler</h2>
            <div class="personal-info-grid">
                <div class="form-group">
                    <label for="patientName">ğŸ‘¤ Ad Soyad</label>
                    <input type="text" id="patientName" placeholder="Hasta adÄ± ve soyadÄ±" required>
                </div>
                <div class="form-group">
                    <label for="birthDate">ğŸ‚ DoÄŸum Tarihi</label>
                    <input type="date" id="birthDate" required>
                    <span id="ageDisplay" class="age-display"></span>
                </div>
                <div class="form-group">
                    <label for="height">ğŸ“ Boy (cm)</label>
                    <input type="number" id="height" step="0.1" placeholder="Ã–rn: 165.5" required>
                </div>
                <div class="form-group">
                    <label for="weight">âš–ï¸ Kilo (kg)</label>
                    <input type="number" id="weight" step="0.1" placeholder="Ã–rn: 55.5" required>
                </div>
            </div>
            <div class="form-group gender-selection">
                <label style="text-align: center; margin-bottom: 15px;">Cinsiyet</label>
                <div class="radio-group">
                    <label class="gender-option">
                        <input type="radio" name="gender" value="male" required>
                        <span class="gender-icon">ğŸ‘¦</span>
                        <span class="gender-text">Erkek</span>
                    </label>
                    <label class="gender-option">
                        <input type="radio" name="gender" value="female">
                        <span class="gender-icon">ğŸ‘§</span>
                        <span class="gender-text">KÄ±z</span>
                    </label>
                </div>
            </div>
        </section>

        <!-- Section 2: Percentile Source Selection -->
        <section id="percentile-source" class="section">
            <h2>2. Persentil KaynaÄŸÄ± SeÃ§imi</h2>
            <div class="tab-container">
                <button class="tab-button active" data-source="manual">Manuel</button>
                <button class="tab-button" data-source="neyzi">Neyzi</button>
                <button class="tab-button" data-source="who">WHO</button>
            </div>
            <div id="sourceDescription" class="source-description"></div>
            <button id="calculateNeeds" class="btn-primary" style="margin-top: 20px;">Hesapla</button>
        </section>

        <!-- Section 3: Reference Values Display -->
        <section id="reference-display" class="section hidden-until-calculation">
            <h2>3. Referans DeÄŸerler</h2>
            <div id="referenceWarning" class="warning-box" style="display:none;"></div>
            <div id="referenceTable" class="reference-table"></div>
        </section>

        <!-- Section 4: Daily Needs Calculation -->
        <section id="daily-needs" class="section results-section hidden-until-calculation">
            <h2>4. GÃ¼nlÃ¼k Ä°htiyaÃ§lar</h2>
            <div class="needs-grid">
                <div class="need-item">
                    <label>BMR (kcal/gÃ¼n):</label>
                    <span id="bmrValue">-</span>
                </div>
                <div class="need-item">
                    <label>Enerji (Ref) (kcal):</label>
                    <span id="energyRefValue">-</span>
                </div>
                <div class="need-item">
                    <label>Enerji (Pratik) (kcal):</label>
                    <input type="number" id="energyPracticalValue" step="1">
                </div>
                <div class="need-item">
                    <label>Protein (g/gÃ¼n):</label>
                    <span id="proteinValue">-</span>
                </div>
                <div class="need-item">
                    <label>Fenilalanin (mg/gÃ¼n):</label>
                    <span id="pheValue">-</span>
                </div>
            </div>
        </section>

        <!-- Section 5: Nutritional Reference Table -->
        <section id="nutrition-reference" class="section hidden-until-calculation">
            <h2>5. Beslenme Referans Tablosu</h2>
            <div id="nutritionRefTable" class="nutrition-table"></div>
        </section>

        <!-- Section 6: Food Selection -->
        <section id="food-selection" class="section hidden-until-calculation">
            <h2>6. Besin SeÃ§imi</h2>
            
            <div class="food-selection-header">
                <div class="food-categories">
                    <button class="category-btn active" data-category="bread">Ekmek ve TahÄ±l</button>
                    <button class="category-btn" data-category="vegetables">Sebzeler</button>
                    <button class="category-btn" data-category="fruits">Meyveler</button>
                </div>
                <div class="food-search-container">
                    <input type="text" id="foodSearchInput" class="food-search-input" placeholder="ğŸ” Besin ara...">
                    <button id="clearSearchBtn" class="clear-search-btn hidden">Ã—</button>
                </div>
            </div>
            <div id="foodList" class="food-list"></div>
            <div id="dailyIntake" class="daily-intake">
                <h3>GÃ¼nlÃ¼k AlÄ±m</h3>
                <p style="color: #666; font-size: 0.9em; margin-bottom: 10px;">ğŸ’¡ Besinleri buraya sÃ¼rÃ¼kleyin veya tÄ±klayÄ±n</p>
                <div id="intakeList" class="intake-list" data-drop-zone="true"></div>
                <div class="intake-totals">
                    <div>Toplam Enerji: <span id="totalEnergy">0</span> kcal</div>
                    <div>Toplam Protein: <span id="totalProtein">0</span> g</div>
                    <div>Toplam Fenilalanin: <span id="totalPhe">0</span> mg</div>
                </div>
                <div id="progressChart" class="progress-chart"></div>
            </div>
        </section>

        <!-- Section 7: Meal Planning -->
        <section id="meal-planning" class="section hidden-until-calculation">
            <h2>7. Ã–ÄŸÃ¼n PlanlamasÄ±</h2>
            <button id="addMeal" class="btn-secondary">Ã–ÄŸÃ¼n Ekle</button>
            
            <div class="meal-planning-container">
                <div class="available-foods-panel">
                    <h3>SeÃ§ilen Besinler</h3>
                    <p class="panel-hint">Besinleri sÃ¼rÃ¼kleyip Ã¶ÄŸÃ¼nlere bÄ±rakÄ±n</p>
                    <div id="availableFoodsList" class="available-foods-list"></div>
                </div>
                <div class="meal-slots-panel">
                    <div id="mealSlots" class="meal-slots"></div>
                </div>
            </div>
        </section>

        <!-- Section 8: Export -->
        <section id="export-section" class="section hidden-until-calculation">
            <h2>8. Rapor</h2>
            <button id="exportPDF" class="btn-primary">PDF Ä°ndir</button>
        </section>
    </div>

    <!-- Scripts -->
    <script src="js/data/reference-data.js"></script>
    <script src="js/data/food-data.js"></script>
    <script src="js/utils/age-calculator.js"></script>
    <script src="js/utils/reference-lookup.js"></script>
    <script src="js/utils/validation.js"></script>
    <script src="js/utils/storage.js"></script>
    <script src="js/utils/modal.js"></script>
    <script src="js/calculations/bmr.js"></script>
    <script src="js/calculations/daily-needs.js"></script>
    <script src="js/ui/user-input.js"></script>
    <script src="js/ui/reference-display.js"></script>
    <script src="js/ui/food-selection.js"></script>
    <script src="js/ui/meal-planning.js"></script>
    <script src="js/ui/history-viewer.js?v=2"></script>
    <script src="js/ui/tooltip.js?v=2"></script>
    <script src="js/export/pdf-export.js?v=5"></script>
    <script src="js/main.js?v=2"></script>
</body>
</html>
